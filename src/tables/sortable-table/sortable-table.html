<table class="table table-striped table-hover"
       st-table="showing" st-safe-src="records">
  <caption ng-if="caption" ng-bind="caption"></caption>
  <thead>
  <tr>
    <th ng-repeat="col in columns track by $index"
        ng-class="stylingFn(col)"
        ng-attr-st-sort="{{col.sortKey}}"
        ng-attr-st-sort-default={{col.defaultSort}}>{{col.name}}
      <help ng-if="col.help" text="{{col.help}}"></help>
      <span ng-if="col.unit" ng-bind="col.unit"></span>
    </th>
  </tr>
  <tr ng-show="false">
    <th colspan="{{columns.length}}">
      <!-- Add an invisible search box that watches external search text -->
      <input type="text" st-search/>
      <!-- Add an invisible pagination before rendering any rows, otherwise it will at least
      render all records once, even they should be shown after page 1. -->
      <div st-pagination st-items-by-page="pagination"></div>
    </th>
  </tr>
  </thead>
  <tbody>
  <tr ng-repeat="record in showing track by $index">
    <td ng-repeat="col in columns track by $index" ng-class="stylingFn(col)">
      <ng-switch on="isArray(col.key)">
        <property ng-switch-when="true"
                  ng-repeat="subKey in col.key track by $index"
                  value-bind="record[subKey]"
                  renderer="{{get(col.renderer, $index)}}"></property>
        <property ng-switch-when="false"
                  value-bind="record[col.key]"
                  renderer="{{col.renderer}}"></property>
      </ng-switch>
    </td>
  </tr>
  <tr ng-if="records !== null && !showing.length">
    <td colspan="{{columns.length}}" class="text-center">
      <i>No data found</i>
    </td>
  </tr>
  </tbody>
  <tfoot ng-if="records.length">
  <tr>
    <td colspan="{{columns.length}}"
        st-pagination st-items-by-page="pagination"
        st-template="tables/sortable-table/sortable-table-pagination.html">
    </td>
  </tr>
  </tfoot>
</table>