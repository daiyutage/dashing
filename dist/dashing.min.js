/*
 * dashing
 * @version v0.0.4
 * @link https://github.com/stanleyxu2005/dashing
 * @license Apache License 2.0, see accompanying LICENSE file
 */
!function(t,e,r){"use strict";angular.module("dashing",["dashing.charts","dashing.charts-comp","dashing.help","dashing.metrics","dashing.progressbar","dashing.property","dashing.property-table","dashing.sortable-table","dashing.state","dashing.tabset"]),angular.module("dashing").run(["$templateCache",function(t){t.put("charts/line-chart-metrics-top.html",'<metrics caption="{{caption}}" ng-attr-help="{{help}}" value="{{current}}" unit="{{unit}}"></metrics> <line-chart options-bind="options" datasource-bind="data"></line-chart>'),t.put("charts/sparkline-chart-metrics-left.html",'<div class="row"> <metrics class="{{metricsPartClass}}" ng-class="{\'col-md-6\':!metricsPartClass}" caption="{{caption}}" ng-attr-help="{{help}}" value="{{current}}" unit="{{unit}}" small-text="{{smallText}}"></metrics> <sparkline-chart class="{{chartPartClass}}" ng-class="{\'col-md-6\':!chartPartClass}" options-bind="options" datasource-bind="data"></sparkline-chart> </div>'),t.put("charts/sparkline-chart-metrics-top.html",'<metrics caption="{{caption}}" ng-attr-help="{{help}}" value="{{current}}" unit="{{unit}}"></metrics> <sparkline-chart options-bind="options" datasource-bind="data"></sparkline-chart>'),t.put("metrics/metrics.html",'<div class="metrics"> <div> <span ng-bind="caption"></span> <help ng-if="help" text="{{help}}"></help> </div> <h3 class="metrics-value"> <span ng-bind="value"></span> <small ng-bind="unit"></small> </h3> <small ng-if="smallText" class="metrics-small-text" ng-bind="smallText"></small> </div>'),t.put("progressbar/progressbar.html",'<div style="width:100%">  <span class="small pull-left" ng-bind="current+\'/\'+max"></span> <span class="small pull-right" ng-bind="usage + \'%\'"></span> </div> <div style="width:100%" class="progress progress-tiny"> <div ng-class="\'progress-bar-\'+colorFn(usage)" ng-style="{width:usage+\'%\'}" class="progress-bar"></div> </div>'),t.put("property-table/property-table.html",'<table class="table table-striped table-condensed"> <caption ng-if="caption" ng-bind="caption"></caption> <tbody> <tr ng-repeat="prop in props track by $index"> <td ng-class="propNameClass"> <span ng-bind="prop.name"></span> <help ng-if="prop.help" text="{{prop.help}}"></help> </td> <td ng-switch="prop.hasOwnProperty(\'values\')" ng-class="propValueClass"> <div ng-switch-when="true" ng-repeat="value in prop.values track by $index"> <property value-bind="value" renderer="{{prop.renderer}}"></property> </div> <div ng-switch-default> <property value-bind="prop.value" renderer="{{prop.renderer}}"></property> </div> </td> </tr> </tbody> </table>'),t.put("property/property.html",'<div ng-switch="renderer">  <a ng-switch-when="Link" ng-href="{{href}}" ng-bind="text"></a>  <state ng-switch-when="State" text="{{text}}" condition="{{condition}}"></state>  <indicator ng-switch-when="Indicator" text="{{text}}" condition="{{condition}}"></indicator>  <progressbar ng-switch-when="ProgressBar" current="{{current}}" max="{{max}}"></progressbar>  <span ng-switch-when="Duration" ng-bind="value|duration"></span>  <span ng-switch-default ng-bind="value"></span> </div>'),t.put("sortable-table/sortable-table-pagination.html",'<div ng-if="pages.length >= 2"> <div class="btn-group btn-group-xs"> <button type="button" class="btn btn-default" ng-class="{disabled: 1==currentPage}" ng-click="selectPage(1)"> <span class="glyphicon glyphicon-step-backward"></span></button> <button type="button" class="btn btn-default" ng-class="{disabled: 1==currentPage}" ng-click="selectPage(currentPage-1)"> <span class="glyphicon glyphicon-chevron-left"></span></button> <button type="button" class="btn btn-default" ng-repeat="page in pages" ng-class="{active: page==currentPage}" ng-click="selectPage(page)"> {{page}} </button> <button type="button" class="btn btn-default" ng-class="{disabled: numPages==currentPage}" ng-click="selectPage(currentPage+1)"> <span class="glyphicon glyphicon-chevron-right"></span></button> <button type="button" class="btn btn-default" ng-class="{disabled: numPages==currentPage}" ng-click="selectPage(numPages)"> <span class="glyphicon glyphicon-step-forward"></span></button> </div> </div>'),t.put("sortable-table/sortable-table.html",'<table class="table table-striped table-condensed" st-table="records_" st-safe-src="records"> <caption ng-if="caption" ng-bind="caption"></caption> <thead> <tr> <th ng-repeat="col in columns track by $index" ng-class="stylingFn(col)" ng-attr-st-sort="{{col.sortKey}}" st-sort-default="{{col.defaultSort}}">{{col.name}} <help ng-if="col.hasOwnProperty(\'help\')" text="{{col.help}}"></help> </th> </tr> <tr ng-if="searchable"> <th colspan="{{columns.length}}"> <input type="text" st-search placeholder="{{searchable}}"> </th> </tr> </thead> <tbody> <tr ng-repeat="record in records_"> <td ng-repeat="col in columns track by $index" ng-class="stylingFn(col)"> <div ng-switch="isArray(col.key)"> <div ng-switch-when="true" ng-repeat="childKey in col.key track by $index"> <property value-bind="record[childKey]" renderer="{{col.renderer[$index]}}"></property> </div> <div ng-switch-default> <property value-bind="record[col.key]" renderer="{{col.renderer}}"></property> </div> </div> </td> </tr> <tr ng-if="records_.length===0"> <td colspan="{{columns.length}}" class="text-center"> <span class="small">No data found</span> </td> </tr> </tbody> <tfoot ng-if="records_.length>0"> <tr> <td colspan="{{columns.length}}"> <div class="pull-left"> Total: <span ng-bind="records_.length"></span> </div> <div class="pull-right" st-pagination st-items-by-page="pagination" st-template="sortable-table/sortable-table-pagination.html"></div> </td> </tr> </tfoot> </table>'),t.put("tabset/tabset.html",'<ul class="nav nav-tabs nav-tabs-underlined"> <li ng-repeat="tab in tabs" ng-class="{active:tab.selected}"> <a href="" ng-click="selectTab(tab)" ng-bind="tab.heading"></a> </li> </ul> <div class="tab-content" ng-transclude></div>')}]),angular.module("dashing.charts-comp",["dashing.charts","dashing.metrics"]).directive("sparklineChartMetricsTop",function(){return{templateUrl:"charts/sparkline-chart-metrics-top.html",restrict:"E",scope:{caption:"@",help:"@",current:"@",unit:"@",options:"=optionsBind",data:"=datasourceBind"}}}).directive("sparklineChartMetricsLeft",function(){return{templateUrl:"charts/sparkline-chart-metrics-left.html",restrict:"E",scope:{caption:"@",help:"@",current:"@",unit:"@",smallText:"@",options:"=optionsBind",data:"=datasourceBind",metricsPartClass:"@",chartPartClass:"@"},controller:["$timeout",function(e){e(function(){angular.element(t).triggerHandler("resize")})}]}}).directive("lineChartMetricsTop",function(){return{templateUrl:"charts/line-chart-metrics-top.html",restrict:"E",scope:{caption:"@",help:"@",current:"@",unit:"@",options:"=optionsBind",data:"=datasourceBind"}}}),angular.module("dashing.charts",["dashing.metrics"]).directive("echart",function(){return{template:"<div></div>",replace:!0,restrict:"E",scope:{options:"=optionsBind",data:"=dataBind"},link:function(e,r){function a(t){return Array.isArray(t)?t:[t]}var n=e.options,i=r[0];i.style.width=n.width,i.style.height=n.height;var s=echarts.init(i);angular.element(t).on("resize",s.resize),e.$on("$destroy",function(){angular.element(t).off("resize",s.resize),s.dispose()}),s.setOption(n,!0),e.$watch("data",function(t){if(t){var e=!n.xAxisDataNum||s.getOption().xAxis[0].data.length<n.xAxisDataNum,r=[];angular.forEach(a(t),function(t){angular.forEach(a(t.y),function(a,n){var i=[n,a,!1,e];0===n&&i.push(t.x),r.push(i)})}),s.addData(r)}})}}}).factory("$echarts",function(){return{tooltip:function(t){var e={trigger:t.trigger||"axis",textStyle:{fontSize:12},axisPointer:{type:"none"},borderRadius:2,formatter:t.formatter,position:function(t){return[t[0],22]}};return t.color&&(e.axisPointer={type:"line",lineStyle:{color:t.color,width:3,type:"dotted"}}),e},tooltipFirstSeriesFormatter:function(t){return function(e){return t(e[0].value)}},tooltipAllSeriesFormatter:function(t){return function(e){return e[0].name+"<table>"+e.map(function(e){var r=e.series.colors.line;return"<tr>"+'<td><div style="width:7px;height:7px;background-color:%s"></div></td>'.replace("%s",r)+'<td style="padding:0 12px 0 4px">'+e.seriesName+"</td><td>"+t(e.value)+"</td></tr>"}).join("")+"</table>"}},makeDataSeries:function(t){return t.type=t.type||"line",angular.merge(t,{symbol:"circle",smooth:!0,itemStyle:{normal:{areaStyle:{type:"default",color:t.colors.area},lineStyle:{color:t.colors.line,width:3}},emphasis:{color:t.colors.line,lineStyle:{color:t.colors.line,width:t.showAllSymbol?4:3}}}})},colorSet:function(t){var e=[{line:"rgb(0,119,215)",area:"#ebf6ff"},{line:"rgb(110,119,215)",area:"#eff0fb"},{line:"rgb(41,189,181)",area:"#eefbfb"},{line:"rgb(212,102,138)",area:"#fbeff3"},{line:"rgb(255,127,80)",area:"#fff0eb"}];return e[t%e.length]},rgba:function(t,e){return t.replace("rgb(","rgba(").replace(")",","+e+")")}}}).directive("sparklineChart",function(){return{template:'<echart options-bind="echartOptions" data-bind="data"></echart>',restrict:"E",scope:{options:"=optionsBind",data:"=datasourceBind"},controller:["$scope","$echarts",function(t,e){var r=t.options,a=t.data,n=e.colorSet(0);t.echartOptions={height:r.height,width:r.width,tooltip:e.tooltip({formatter:r.tooltipFormatter?r.tooltipFormatter:e.tooltipFirstSeriesFormatter(r.valueFormatter||function(t){return t})}),dataZoom:{show:!1},grid:{borderWidth:0,x:5,y:5,x2:5,y2:0},xAxis:[{boundaryGap:!1,axisLabel:!1,splitLine:!1,data:a.map(function(t){return t.x})}],yAxis:[{show:!1}],xAxisDataNum:r.maxDataNum,series:[e.makeDataSeries({colors:n,data:a.map(function(t){return t.y})})]}}]}}).directive("lineChart",function(){return{template:'<echart options-bind="echartOptions" data-bind="data"></echart>',restrict:"E",scope:{options:"=optionsBind",data:"=datasourceBind"},controller:["$scope","$echarts",function(t,e){var r=t.options,a=t.data,n={lineStyle:{width:1,color:"#ccc"}},i={height:r.height,width:r.width,tooltip:e.tooltip({color:"rgba(235,235,235,.75)",formatter:r.tooltipFormatter?r.tooltipFormatter:e.tooltipAllSeriesFormatter(r.valueFormatter||function(t){return t})}),dataZoom:{show:!1},grid:{borderWidth:0,y:10,x2:5,y2:22},xAxis:[{boundaryGap:!1,axisLine:n,axisTick:n,axisLabel:{show:!0},splitLine:!1,data:a.map(function(t){return t.x})}],yAxis:[{splitNumber:r.yAxisValuesNum||3,splitLine:{show:!1},axisLine:{show:!1}}],xAxisDataNum:r.maxDataNum,series:[],color:r.seriesNames.map(function(t,r){return e.colorSet(r).line})};angular.forEach(r.seriesNames,function(t,r){i.series.push(e.makeDataSeries({colors:e.colorSet(r),name:t,stack:!0,showAllSymbol:!0,data:a.map(function(t){return t.y[r]})}))}),i.series.length>1&&(i.legend={show:!0,itemWidth:8,data:[]},angular.forEach(i.series,function(t){i.legend.data.push(t.name)}),i.grid.y=30),t.echartOptions=i}]}}),angular.module("dashing.help",["mgcrea.ngStrap.tooltip"]).directive("help",function(){return{template:'<span class="glyphicon glyphicon-question-sign help-icon" bs-tooltip="text"></span>',restrict:"E",scope:{text:"@"}}}),angular.module("dashing.metrics",[]).directive("metrics",function(){return{templateUrl:"metrics/metrics.html",restrict:"E",scope:{caption:"@",help:"@",value:"@",unit:"@",smallText:"@"}}}),angular.module("dashing.progressbar",[]).directive("progressbar",function(){return{templateUrl:"progressbar/progressbar.html",restrict:"E",scope:{current:"@",max:"@"},controller:["$scope",function(t){t.$watch("[current, max]",function(){t.usage=t.max>0?Math.round(100*t.current/t.max):-1}),t.colorFn=function(t){return 50>t?"info":75>t?"warning":"danger"}}]}}),angular.module("dashing.property-table",[]).directive("propertyTable",function(){return{templateUrl:"property-table/property-table.html",restrict:"E",scope:{caption:"@",props:"=propsBind",propNameClass:"@",propValueClass:"@"}}}),angular.module("dashing.property",[]).directive("property",function(){return{templateUrl:"property/property.html",restrict:"E",replace:!1,scope:{value:"=valueBind",renderer:"@"},controller:["$scope",function(t){t.$watch("value",function(e){if(e)switch(t.renderer){case"ProgressBar":t.current=e.current,t.max=e.max;break;case"Link":t.href=e.href,t.text=e.text||e.href;break;case"State":t.text=e.text,t.condition=e.condition;break;case"Indicator":t.text=e.text,t.condition=e.condition}})}]}}).filter("duration",function(){return function(t){var e=parseInt(t,10);if(isNaN(e))return t;for(var r=[{label:"ms",mod:1e3},{label:"secs",mod:60},{label:"mins",mod:60},{label:"hours",mod:24},{label:"days",mod:7},{label:"weeks",mod:52}],a=[],n=0;n<r.length;n++){var i=r[n],s=e%i.mod;0!==s&&a.unshift({label:i.label,value:s}),e=(e-s)/i.mod}return a=a.slice(0,2),a.length>1&&"ms"===a[1].label&&(a=[a[0]]),a.map(function(t){return t.value+" "+t.label}).join(" and ")}}),angular.module("dashing.sortable-table",["smart-table"]).directive("sortableTable",function(){return{templateUrl:"sortable-table/sortable-table.html",restrict:"E",scope:{caption:"@",pagination:"@",searchable:"@",columns:"=columnsBind",records:"=recordsBind"},controller:["$scope",function(t){t.stylingFn=function(t){return t.style+(-1!==["Number"].indexOf(t.renderer)?" text-right":"")},t.isArray=angular.isArray}]}}).config(["stConfig",function(t){t.sort.skipNatural=!0}]),angular.module("dashing.state",[]).directive("state",function(){return{template:'<span ng-class="stylingFn(condition)" class="label" ng-bind="text"></span>',restrict:"E",scope:{condition:"@",text:"@"},controller:["$scope",function(t){t.stylingFn=function(t){switch(t){case"good":return"label-success";case"concern":return"label-warning";case"danger":return"label-danger";default:return"label-default"}}}]}}).directive("indicator",function(){return{template:'<small ng-style="{color:colorFn(condition)}" class="glyphicon glyphicon-stop" ng-attr-bs-tooltip="text"></small>',restrict:"E",scope:{condition:"@",text:"@"},controller:["$scope",function(t){t.colorFn=function(t){switch(t){case"good":return"#5cb85c";case"concern":return"#f0ad4e";case"danger":return"#d9534f";default:return"#777"}}}]}}),angular.module("dashing.tabset",[]).directive("tabset",[function(){return{templateUrl:"tabset/tabset.html",restrict:"E",transclude:!0,scope:{switchTo:"="},controller:["$scope",function(t){var e=t.tabs=[];t.selectTab=function(t,a){angular.forEach(e,function(e){e.selected=e===t}),t.load!==r&&t.load(a)},this.addTab=function(r){e.push(r),1===e.length&&t.selectTab(r)},t.$watch("switchTo",function(r){if(r){var a=r.tabIndex;a>=0&&a<e.length&&t.selectTab(e[a],r.reload),t.switchTo=null}})}]}}]).directive("tab",["$http","$controller","$compile",function(t,e,r){return{require:"^tabset",restrict:"E",transclude:!0,link:function(a,n,i,s){a.heading=i.heading,i.template&&(a.loaded=!1,a.load=function(s){(!a.loaded||s)&&t.get(i.template).then(function(t){var s=a.$new();n.html(t.data),i.controller&&n.children().data("$ngController",e(i.controller,{$scope:s})),r(n.contents())(s),a.loaded=!0})}),s.addTab(a)},template:'<div class="tab-pane" ng-class="{active:selected}" ng-transclude></div>',replace:!0}}])}(window,document);
//# sourceMappingURL=dashing.min.js.map