/*
 * dashing (assembled widgets)
 * @version v0.0.7
 * @link https://github.com/stanleyxu2005/dashing
 * @license Apache License 2.0, see accompanying LICENSE file
 */
!function(t,e,r){"use strict";angular.module("dashing",["dashing.charts.echarts","dashing.charts.bar","dashing.charts.line","dashing.charts.metrics-sparkline","dashing.charts.sparkline","dashing.contextmenu","dashing.help","dashing.metrics","dashing.progressbar","dashing.property","dashing.state","dashing.tables.property-table","dashing.tables.sortable-table","dashing.tabset"]),angular.module("dashing").run(["$templateCache",function(t){t.put("charts/metrics-sparkline-lr.html",'<div class="row"> <metrics class="{{metricsPartClass}}" ng-class="{\'col-md-6\':!metricsPartClass}" caption="{{caption}}" ng-attr-help="{{help}}" value="{{current}}" unit="{{unit}}" small-text="{{smallText}}"></metrics> <sparkline class="{{chartPartClass}}" ng-class="{\'col-md-6\':!chartPartClass}" options-bind="options" datasource-bind="data"></sparkline> </div>'),t.put("charts/metrics-sparkline-td.html",'<metrics caption="{{caption}}" ng-attr-help="{{help}}" value="{{current}}" unit="{{unit}}" small-text="{{smallText}}"></metrics> <sparkline options-bind="options" datasource-bind="data"></sparkline>'),t.put("metrics/metrics.html",'<div class="metrics"> <div> <span class="metrics-caption" ng-bind="caption"></span> <help ng-if="help" text="{{help}}"></help> </div> <h3 class="metrics-value"> <span ng-bind="value"></span> <small ng-bind="unit"></small> </h3> <small ng-if="smallText" class="metrics-small-text" ng-bind="smallText"></small> </div>'),t.put("progressbar/progressbar.html",'<div style="width:100%">  <span class="small pull-left" ng-bind="current+\'/\'+max"></span> <span class="small pull-right" ng-bind="usage + \'%\'"></span> </div> <div style="width:100%" class="progress progress-tiny"> <div ng-class="\'progress-bar-\'+colorFn(usage)" ng-style="{width:usage+\'%\'}" class="progress-bar"></div> </div>'),t.put("property/property.html",'<ng-switch on="renderer">  <a ng-switch-when="Link" ng-href="{{href}}" ng-bind="text"></a>  <button ng-switch-when="Button" ng-if="!hide" type="button" class="btn btn-default {{class}}" ng-bind="text" ng-click="click()" ng-attr-ng-disabled="{{disabled}}"></button>  <a ng-switch-when="Tag" ng-href="{{href}}" ng-bind="text" class="label label-lg {{color}}" bs-tooltip="tooltip"></a>  <state ng-switch-when="State" text="{{text}}" condition="{{condition}}"></state>  <indicator ng-switch-when="Indicator" text="{{text}}" condition="{{condition}}"></indicator>  <progressbar ng-switch-when="ProgressBar" current="{{current}}" max="{{max}}"></progressbar>  <span ng-switch-when="Duration" ng-bind="value|duration"></span>  <span ng-switch-when="DateTime" ng-bind="value|date:\'yyyy-MM-dd HH:MM:ss\'"></span>  <span ng-switch-when="Number" ng-bind="value|number:0"></span>  <span ng-switch-default ng-bind="value"></span> </ng-switch>'),t.put("tables/property-table/property-table.html",'<table class="table table-striped table-hover"> <caption ng-if="caption" ng-bind="caption"></caption> <tbody> <tr ng-repeat="prop in props track by $index"> <td ng-class="propNameClass"> <span ng-bind="prop.name"></span> <help ng-if="prop.help" text="{{prop.help}}"></help> </td> <td ng-class="propValueClass"> <ng-switch on="prop.hasOwnProperty(\'values\')"> <div ng-switch-when="true" class="text-nowrap" ng-repeat="value in prop.values track by $index"> <property value-bind="value" renderer="{{prop.renderer}}"></property> </div> <property ng-switch-when="false" value-bind="prop.value" renderer="{{prop.renderer}}"></property> </ng-switch> </td> </tr> </tbody> </table>'),t.put("tables/sortable-table/sortable-table-pagination.html",'<div class="pull-left"> <st-summary></st-summary> </div> <div class="pull-right"> <div ng-if="pages.length >= 2" class="btn-group btn-group-xs">  <button type="button" class="btn btn-default" ng-class="{disabled:1==currentPage}" ng-click="selectPage(currentPage-1)"> &laquo;</button> <button type="button" class="btn btn-default" ng-repeat="page in pages track by $index" ng-class="{active:page==currentPage}" ng-click="selectPage(page)"> {{page}} </button> <button type="button" class="btn btn-default" ng-class="{disabled:numPages==currentPage}" ng-click="selectPage(currentPage+1)"> &raquo;</button>  </div> </div>'),t.put("tables/sortable-table/sortable-table.html",'<table class="table table-striped table-hover" st-table="showing" st-safe-src="records"> <caption ng-if="caption" ng-bind="caption"></caption> <thead> <tr> <th ng-repeat="col in columns track by $index" ng-class="stylingFn(col)" ng-attr-st-sort="{{col.sortKey}}" ng-attr-st-sort-default="{{col.defaultSort}}">{{col.name}} <help ng-if="col.help" text="{{col.help}}"></help> <span ng-if="col.unit" ng-bind="col.unit"></span> </th> </tr> <tr ng-show="false"> <th colspan="{{columns.length}}">  <input type="text" st-search>  <div st-pagination st-items-by-page="pagination"></div> </th> </tr> </thead> <tbody> <tr ng-repeat="record in showing track by $index"> <td ng-repeat="col in columns track by $index" ng-class="stylingFn(col)"> <ng-switch on="isArray(col.key)"> <property ng-switch-when="true" ng-repeat="subKey in col.key track by $index" value-bind="record[subKey]" renderer="{{get(col.renderer, $index)}}"></property> <property ng-switch-when="false" value-bind="record[col.key]" renderer="{{col.renderer}}"></property> </ng-switch> </td> </tr> <tr ng-if="records !== null && !showing.length"> <td colspan="{{columns.length}}" class="text-center"> <i>No data found</i> </td> </tr> </tbody> <tfoot ng-if="records.length"> <tr> <td colspan="{{columns.length}}" st-pagination st-items-by-page="pagination" st-template="tables/sortable-table/sortable-table-pagination.html"> </td> </tr> </tfoot> </table>'),t.put("tabset/tabset.html",'<ul class="nav nav-tabs nav-tabs-underlined"> <li ng-repeat="tab in tabs track by $index" ng-class="{active:tab.selected}"> <a href="" ng-click="selectTab(tab)" ng-bind="tab.heading"></a> </li> </ul> <div class="tab-content" ng-transclude></div>')}]),angular.module("dashing.charts.bar",["dashing.charts.echarts"]).directive("barChart",[function(){return{template:'<echart options="echartOptions" data="data"></echart>',restrict:"E",scope:{options:"=optionsBind",data:"=datasourceBind"},controller:["$scope","$echarts",function(t,e){var r=t.options,n=t.data,a=e.colorPalette(0)[0];t.echartOptions={height:r.height,width:r.width,tooltip:e.tooltip({color:a.grid,trigger:"item"}),grid:{borderWidth:0,x:45,y:5,x2:5,y2:42},xAxis:[{axisLabel:{show:!1},axisLine:{show:!1},axisTick:{show:!1},splitLine:{show:!1},data:n.map(function(t){return t.x})}],yAxis:[{show:!1}],xAxisDataNum:r.maxDataNum,dataZoom:{show:!0,handleColor:"rgb(188,188,188)",fillerColor:"rgba(188,188,188,.15)"},series:[e.makeDataSeries({colors:a,type:"bar",barWidth:7,barMaxWidth:7,barGap:2,barCategoryGap:2,smooth:!1,data:n.map(function(t){return t.y})})]}}]}}]),angular.module("dashing.charts.echarts",[]).directive("echart",["$echarts",function(e){return{template:"<div></div>",replace:!0,restrict:"E",scope:{options:"=",data:"="},link:function(r,n){var a=r.options,i=n[0];i.style.width=a.width,i.style.height=a.height;var o=echarts.init(i);o.setTheme(e.themeOverrides()),angular.element(t).on("resize",o.resize),r.$on("$destroy",function(){angular.element(t).off("resize",o.resize),o.dispose()}),o.setOption(a,!0),r.$watch("data",function(t){if(t)try{var r=o.getOption().xAxis[0].data.length,n=Math.min(80,Math.max(0,a.xAxisDataNum-r)),i=e.makeDataArray(n,t);i.length>0&&(t.yAxisMax&&o.setOption({yAxis:[{max:t.yAxisMax}]},!1),o.addData(i))}catch(s){}})}}}]).factory("$echarts",function(){var t={tooltip:function(t){var e={trigger:t.trigger||"axis",textStyle:{fontSize:12},axisPointer:{type:"none"},borderRadius:2,showDelay:0,formatter:t.formatter,position:t.position||function(t){return[t[0],22]}};return t.color&&(e.axisPointer={type:"line",lineStyle:{color:t.color,width:3,type:"dotted"}}),e},tooltipFirstSeriesFormatter:function(e){return function(r){var n=r[0].series.colors.line;return r[0].name+"<table><tr><td>"+t.tooltipSeriesColorIndicatorHtml(n)+'</td><td style="padding-left:4px">'+e(r[0].value)+"</td></tr></table>"}},tooltipAllSeriesFormatter:function(e){return function(r){return r[0].name+"<table>"+r.map(function(r){var n=r.series.colors.line;return"<tr><td>"+t.tooltipSeriesColorIndicatorHtml(n)+'</td><td style="padding:0 12px 0 4px">'+r.seriesName+"</td><td>"+e(r.value)+"</td></tr>"}).join("")+"</table>"}},tooltipSeriesColorIndicatorHtml:function(t){return'<div style="width:7px;height:7px;background-color:'+t+'"></div>'},makeDataSeries:function(t){t.type=t.type||"line";var e={symbol:"circle",smooth:t.smooth||!0,itemStyle:{normal:{lineStyle:{color:t.colors.line,width:3}},emphasis:{color:t.colors.line,lineStyle:{color:t.colors.line,width:3}}}};return t.stack?e.itemStyle.normal.areaStyle={type:"default",color:t.colors.area}:t.showAllSymbol&&(e.itemStyle.normal.lineStyle.width-=1),angular.merge(t,e)},makeDataArray:function(t,e){function r(t){return Array.isArray(t)?t:[t]}var n=[];return angular.forEach(r(e),function(e){var a=t-->0;angular.forEach(r(e.y),function(t,r){var i=[r,t,!1,a];0===r&&i.push(e.x),n.push(i)})}),n},splitDataArray:function(t,e){if(-1!==[0,e].indexOf(t.length))return{head:t,tail:[]};var r={head:angular.copy(t),tail:[]};if(r.head.length>e)r.tail=r.head.splice(e);else for(var n=r.head[0],a=0;e-1>a;a++)r.head.unshift(n);return r},colorPalette:function(t){function e(t){var e={blue:"rgb(0,119,215)",purple:"rgb(110,119,215)",green:"rgb(41,189,181)",darkRed:"rgb(212,102,138)",orange:"rgb(255,127,80)"};switch(t){case 1:return[e.blue];case 2:return[e.blue,e.green];default:return Object.keys(e).map(function(t){return e[t]})}}return e(t).map(function(t){var e=zrender.tool.color.lift(t,-.92);return{line:t,area:e}})},themeOverrides:function(){return{markLine:{symbol:["circle","circle"]},title:{textStyle:{fontSize:14,fontWeight:"400",color:"#000"}},textStyle:{fontFamily:'roboto,"helvetica neue","segoe ui",arial'},loadingText:"Data Loading...",noDataText:"No Graphic Data Found",addDataAnimation:!1}}};return t}),angular.module("dashing.charts.line",["dashing.charts.echarts"]).directive("lineChart",function(){return{template:'<echart options="echartOptions" data="data"></echart>',restrict:"E",scope:{options:"=optionsBind",data:"=datasourceBind"},controller:["$scope","$echarts",function(t,e){var r=angular.merge({stacked:!0,yAxisValuesNum:3},t.options),n=e.splitDataArray(t.data,r.maxDataNum),a=e.colorPalette(r.seriesNames.length),i={lineStyle:{width:1,color:"#ddd"}},o={height:r.height,width:r.width,tooltip:e.tooltip({color:"rgb(235,235,235)",formatter:r.tooltipFormatter?r.tooltipFormatter:e.tooltipAllSeriesFormatter(r.valueFormatter||function(t){return t})}),dataZoom:{show:!1},grid:{borderWidth:0,y:20,x2:5,y2:23},xAxis:[{boundaryGap:!1,axisLine:i,axisTick:i,axisLabel:{show:!0},splitLine:!1,data:n.head.map(function(t){return t.x})}],yAxis:[{splitNumber:r.yAxisValuesNum,splitLine:{show:!1},axisLine:{show:!1},scale:r.scale}],xAxisDataNum:r.maxDataNum,series:[],color:r.seriesNames.map(function(t,e){return a[e%a.length].line})};angular.forEach(r.seriesNames,function(t,i){o.series.push(e.makeDataSeries({name:t,colors:a[i%a.length],stack:r.stacked,showAllSymbol:!0,data:n.head.map(function(t){return t.y[i]})}))});var s=20,l=16;r.title&&(o.title={text:r.title,x:0,y:3},o.grid.y+=s),t.showLegend=o.series.length>1,t.showLegend&&(o.legend={show:!0,itemWidth:8,data:[]},angular.forEach(o.series,function(t){o.legend.data.push(t.name)}),o.legend.y=6,r.title&&(o.legend.y+=s,o.grid.y+=l)),(t.showLegend||r.title)&&(o.grid.y+=12),t.echartOptions=o,n.tail.length&&(t.data=n.tail)}]}}),angular.module("dashing.charts.metrics-sparkline",["dashing.charts.sparkline","dashing.metrics"]).directive("metricsSparklineTd",function(){return{templateUrl:"charts/metrics-sparkline-td.html",restrict:"E",scope:{caption:"@",help:"@",current:"@",unit:"@",smallText:"@",options:"=optionsBind",data:"=datasourceBind"},controller:["$scope",function(t){t.options.grid={y:12}}]}}).directive("metricsSparklineLr",function(){return{templateUrl:"charts/metrics-sparkline-lr.html",restrict:"E",scope:{caption:"@",help:"@",current:"@",unit:"@",smallText:"@",options:"=optionsBind",data:"=datasourceBind",metricsPartClass:"@",chartPartClass:"@"},controller:["$timeout",function(e){e(function(){angular.element(t).triggerHandler("resize")})}]}}),angular.module("dashing.charts.sparkline",["dashing.charts.echarts"]).directive("sparkline",function(){return{template:'<echart options="echartOptions" data="data"></echart>',restrict:"E",scope:{options:"=optionsBind",data:"=datasourceBind"},controller:["$scope","$echarts",function(t,e){var r=t.options,n=e.colorPalette(1)[0],a=e.splitDataArray(t.data,r.maxDataNum);t.echartOptions={height:r.height,width:r.width,tooltip:e.tooltip({formatter:r.tooltipFormatter?r.tooltipFormatter:e.tooltipFirstSeriesFormatter(r.valueFormatter||function(t){return t})}),dataZoom:{show:!1},grid:angular.merge({borderWidth:1,x:5,y:5,x2:5,y2:1},r.grid),xAxis:[{boundaryGap:!1,axisLabel:!1,splitLine:!1,data:a.head.map(function(t){return t.x})}],yAxis:[{show:!1,scale:r.scale}],xAxisDataNum:r.maxDataNum,series:[e.makeDataSeries({colors:n,stack:!0,data:a.head.map(function(t){return t.y})})]},a.tail.length&&(t.data=a.tail)}]}}),angular.module("dashing.contextmenu",["mgcrea.ngStrap.dropdown"]).factory("$contextmenu",function(){return{popup:function(t,e){angular.element(t).css({left:e.x+"px",top:e.y+"px"}),angular.element(t).triggerHandler("click")}}}),angular.module("dashing.help",["mgcrea.ngStrap.tooltip"]).directive("help",function(){return{template:'<span class="glyphicon glyphicon-question-sign help-icon" bs-tooltip="text"></span>',restrict:"E",scope:{text:"@"}}}),angular.module("dashing.metrics",[]).directive("metrics",function(){return{templateUrl:"metrics/metrics.html",restrict:"E",scope:{caption:"@",help:"@",value:"@",unit:"@",smallText:"@"}}}),angular.module("dashing.progressbar",[]).directive("progressbar",function(){return{templateUrl:"progressbar/progressbar.html",restrict:"E",scope:{current:"@",max:"@"},controller:["$scope",function(t){t.$watch("[current, max]",function(){t.usage=t.max>0?Math.round(100*t.current/t.max):-1}),t.colorFn=function(t){return 50>t?"info":75>t?"warning":"danger"}}]}}),angular.module("dashing.property",["mgcrea.ngStrap.tooltip"]).directive("property",function(){return{templateUrl:"property/property.html",restrict:"E",replace:!1,scope:{value:"=valueBind",renderer:"@"},controller:["$scope",function(t){function e(t){switch(t){case"green":return"label-success";case"yellow":return"label-warning";case"red":return"label-danger";default:return"label-default"}}t.$watch("value",function(r){if(r)switch(t.renderer){case"ProgressBar":t.current=r.current,t.max=r.max;break;case"Link":t.href=r.href,t.text=r.text||r.href;break;case"Tag":t.text=r.text,t.href=r.href,t.color=e(r.color),t.tooltip=r.tooltip;break;case"Button":t.text=r.text,t["class"]=r["class"],t.click=r.click,t.disabled=r.disabled,t.hide=r.hide;break;case"State":case"Indicator":t.text=r.text,t.condition=r.condition}})}]}}).filter("duration",function(){return function(t){var e=parseInt(t,10);if(isNaN(e))return t;for(var r=[{label:"ms",mod:1e3},{label:"secs",mod:60},{label:"mins",mod:60},{label:"hours",mod:24},{label:"days",mod:7},{label:"weeks",mod:52}],n=[],a=0;a<r.length;a++){var i=r[a],o=e%i.mod;0!==o&&n.unshift({label:i.label,value:o}),e=(e-o)/i.mod}return n=n.slice(0,2),n.length>1&&"ms"===n[1].label&&(n=[n[0]]),n.map(function(t){return t.value+" "+t.label}).join(" and ")}}),angular.module("dashing.state",["mgcrea.ngStrap.tooltip"]).directive("state",function(){return{template:'<span ng-class="classFn(condition,text)" class="label" ng-bind="text"></span>',restrict:"E",scope:{condition:"@",text:"@"},controller:["$scope",function(t){t.classFn=function(t,e){var r=e?"label-lg ":"";switch(t){case"good":return r+"label-success";case"concern":return r+"label-warning";case"danger":return r+"label-danger";default:return r+"label-default"}}}]}}).directive("indicator",function(){return{template:'<small ng-style="{color:colorFn(condition)}" class="glyphicon glyphicon-stop" bs-tooltip="text"></small>',restrict:"E",scope:{condition:"@",text:"@"},controller:["$scope",function(t){t.colorFn=function(t){switch(t){case"good":return"#5cb85c";case"concern":return"#f0ad4e";case"danger":return"#d9534f";default:return"#777"}}}]}}),angular.module("dashing.tables.property-table",[]).directive("propertyTable",function(){return{templateUrl:"tables/property-table/property-table.html",restrict:"E",scope:{caption:"@",props:"=propsBind",propNameClass:"@",propValueClass:"@"}}}).factory("$ptBuilder",function(){var t=function(t,e){this.props=t?{renderer:t}:{},e&&this.title(e)};return t.prototype.title=function(t){return this.props.name=t,this},t.prototype.help=function(t){return this.props.help=t,this},t.prototype.done=function(){return this.props},{button:function(e){return new t("Button",e)},datetime:function(e){return new t("DateTime",e)},duration:function(e){return new t("Duration",e)},indicator:function(e){return new t("Indicator")},link:function(e){return new t("Link",e)},number:function(e){return new t("Number",e)},progressbar:function(e){return new t("ProgressBar",e)},state:function(e){return new t("State",e)},text:function(e){return new t(r,e)}}}),angular.module("dashing.tables.sortable-table",["smart-table"]).directive("sortableTable",function(){return{templateUrl:"tables/sortable-table/sortable-table.html",restrict:"E",scope:{caption:"@",pagination:"@",columns:"=columnsBind",records:"=recordsBind",search:"=searchBind"},controller:["$scope","$element",function(t,e){var r=e.find("input")[0];t.$watch("search",function(t){r.value=t||"",angular.element(r).triggerHandler("input")}),t.stylingFn=function(t){var e=[];return t.styleClass&&e.push(t.styleClass),"Number"===t.renderer&&e.push("text-right"),angular.isArray(t.key)&&!t.vertical&&e.push("text-nowrap"),e.join(" ")},t.isArray=angular.isArray,t.get=function(t,e){return angular.isArray(t)?t[e]:t}}]}}).directive("stSummary",function(){return{require:"^stTable",template:"Showing {{ stRange.from }}-{{ stRange.to }} of {{ totalItemCount }} records",link:function(t,e,r,n){t.stRange={from:null,to:null},t.$watch("currentPage",function(){var e=n.tableState().pagination;t.stRange.from=e.start+1,t.stRange.to=t.currentPage===e.numberOfPages?e.totalItemCount:t.stRange.from+t.stItemsByPage-1})}}}).config(["stConfig",function(t){t.sort.skipNatural=!0}]).factory("$stColBuilder",function(){var t=function(t,e){this.props=t?{renderer:t}:{},e&&this.title(e)};return t.prototype.title=function(t){return this.props.name=t,this},t.prototype.key=function(t){return this.props.key=t,this},t.prototype.keyCanSort=function(t,e){return this.props.key=t,this.props.sortKey=t,e!==r&&(this.props.defaultSort=-1!==["reverse",!1].indexOf(e)?"reverse":!0),this},t.prototype.styleClass=function(t){return this.props.styleClass=t,this},t.prototype.sortBy=function(t){return this.props.sortKey=t,this},t.prototype.unit=function(t){return this.props.unit=t,this},t.prototype.help=function(t){return this.props.help=t,this},t.prototype.done=function(){return this.props},{button:function(e){return new t("Button",e)},datetime:function(e){return new t("DateTime",e)},duration:function(e){return new t("Duration",e)},indicator:function(e){return new t("Indicator",e)},link:function(e){return new t("Link",e)},number:function(e){return new t("Number",e)},progressbar:function(e){return new t("ProgressBar",e)},state:function(e){return new t("State",e)},text:function(e){return new t(r,e)}}}),angular.module("dashing.tabset",[]).directive("tabset",[function(){return{templateUrl:"tabset/tabset.html",restrict:"E",transclude:!0,scope:{switchTo:"="},controller:["$scope",function(t){var e=t.tabs=[];t.selectTab=function(t,n){angular.forEach(e,function(e){e.selected=e===t}),t.load!==r&&t.load(n)},this.addTab=function(r){e.push(r),1===e.length&&t.selectTab(r)},t.$watch("switchTo",function(r){if(r){var n=r.tabIndex;n>=0&&n<e.length&&t.selectTab(e[n],r.reload),t.switchTo=null}})}]}}]).directive("tab",["$http","$controller","$compile",function(t,e,r){return{require:"^tabset",restrict:"E",transclude:!0,link:function(n,a,i,o){n.heading=i.heading,i.template&&(n.loaded=!1,n.load=function(o){(!n.loaded||o)&&t.get(i.template).then(function(t){var o=n.$new(!1);a.html(t.data),i.controller&&a.children().data("$ngController",e(i.controller,{$scope:o})),r(a.contents())(o),n.loaded=!0})}),o.addTab(n)},template:'<div class="tab-pane" ng-class="{active:selected}" ng-transclude></div>',replace:!0}}])}(window,document);
//# sourceMappingURL=dashing.min.js.map